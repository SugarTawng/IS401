import q from"./CLsrxzl_.js";import G from"./C0LKiM39.js";import Q from"./DgNzPO1Y.js";import R from"./UEL7mprB.js";import F from"./Dw3xtoWV.js";import{q as Z,r as n,v as A,s as U,x as B,o as H,g as M,w as y,b as c,a as e,h as t,i as D,t as L,u as J,d as O}from"./DaYTUSRu.js";import{u as X}from"./WSTKsw6M.js";import{a as P}from"./CBeCEV4t.js";import{u as ee}from"./DzPs5bSl.js";const I=Z("Notifications",()=>{const x=n([]),N=n({}),m=async()=>{const a=A("token");U(X());const{data:o}=await ee(B+"/auth/message",{headers:{"Content-Type":"application/json",access_token:a.value}},"$QC0cVA3CX7");x.value=o.value.data.data};return{notifications:x,currentNotification:N,getNotifications:m,addNewNotification:async a=>{const o=A("token"),s=await $fetch(B+"/auth/message",{method:"post",headers:{"Content-Type":"application/json",access_token:o.value},body:a});return await m(),s},editNotification:async a=>{const o=A("token"),s=await $fetch(B+`/auth/message/${a.id}`,{method:"put",headers:{"Content-Type":"application/json",access_token:o.value},body:a});return await m(),s},deleteNotification:async a=>{const o=A("token"),s=await $fetch(B+`/auth/message/${a.id}`,{method:"delete",headers:{"Content-Type":"application/json",access_token:o.value}});return await m(),s}}}),te=e("div",{class:"inline-flex items-center justify-center gap-2"},[e("span",{class:"font-bold text-xl"},"Notification Details")],-1),oe={class:"flex flex-col gap-3"},le={class:"flex flex-1 flex-col gap-2"},ae=e("label",{for:"projectID"},"Project",-1),se={class:"flex flex-1 flex-col gap-2"},ne=e("label",{for:"title"},"Title",-1),ie={class:"flex flex-1 flex-col gap-2"},ce=e("label",{for:"status"},"Status",-1),ue={class:"flex flex-1 flex-col gap-2"},de=e("label",{for:"content"},"Content",-1),re={class:"flex flex-row gap-3 justify-between"},pe={class:"text-xs text-gray-400"},fe={class:"text-xs text-gray-400"},Je={__name:"ViewDetailsNotificationDialog",props:["visible","statuses"],setup(x){var j,i,T,C,k,$,S,r;const{visible:N,statuses:m}=x,{currentNotification:l}=U(I()),{projectsDropdown:g}=U(X()),u=n(N),a=n(l.value.title),o=n(l.value.content),s=n({name:(i=(j=m.filter(f=>f.value==l.value.status))==null?void 0:j[0])==null?void 0:i.name,value:(C=(T=m.filter(f=>f.value==l.value.status))==null?void 0:T[0])==null?void 0:C.value}),_=n({name:($=(k=g.value.filter(f=>f.value==l.value.project_id))==null?void 0:k[0])==null?void 0:$.name,value:(r=(S=g.value.filter(f=>f.value==l.value.project_id))==null?void 0:S[0])==null?void 0:r.value}),V=n(l.value.created_at),w=n(l.value.updated_at);return(f,v)=>{const E=q,p=G,d=Q,z=R,Y=F;return H(),M(Y,{visible:t(u),"onUpdate:visible":v[5]||(v[5]=b=>D(u)?u.value=b:null),modal:"",maximizable:"",header:"Header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:y(()=>[te]),footer:y(()=>[c(z,{type:"button",label:"Close",onClick:v[4]||(v[4]=b=>u.value=!1)})]),default:y(()=>[e("template",oe,[e("div",le,[ae,c(E,{id:"projectID",placeholder:"Select Project",modelValue:t(_).value,"onUpdate:modelValue":v[0]||(v[0]=b=>t(_).value=b),options:t(g),optionLabel:"name",optionValue:"value",disabled:""},null,8,["modelValue","options"])]),e("div",se,[ne,c(p,{id:"title",modelValue:t(a),"onUpdate:modelValue":v[1]||(v[1]=b=>D(a)?a.value=b:null),disabled:""},null,8,["modelValue"])]),e("div",ie,[ce,c(E,{id:"status",class:"flex-1",modelValue:t(s).value,"onUpdate:modelValue":v[2]||(v[2]=b=>t(s).value=b),placeholder:"Select Status",options:x.statuses,optionLabel:"name",optionValue:"value",disabled:""},null,8,["modelValue","options"])]),e("div",ue,[de,c(d,{id:"content",modelValue:t(o),"onUpdate:modelValue":v[3]||(v[3]=b=>D(o)?o.value=b:null),autoResize:"",rows:"5",cols:"30",disabled:""},null,8,["modelValue"])]),e("div",re,[e("span",pe," Created at: "+L(("convertDateTime"in f?f.convertDateTime:t(P))(t(V))),1),e("span",fe," Updated at: "+L(("convertDateTime"in f?f.convertDateTime:t(P))(t(w))),1)])])]),_:1},8,["visible"])}}},ve=e("div",{class:"inline-flex items-center justify-center gap-2"},[e("span",{class:"font-bold text-xl"},"Create New Notification")],-1),me={class:"flex flex-col gap-3"},_e={class:"flex flex-1 flex-col gap-2"},xe=e("label",{for:"projectID"},"Project",-1),be={class:"flex flex-1 flex-col gap-2"},ye=e("label",{for:"title"},"Title",-1),ge={class:"flex flex-1 flex-col gap-2"},Ve=e("label",{for:"status"},"Status",-1),we={class:"flex flex-1 flex-col gap-2"},he=e("label",{for:"content"},"Content",-1),Ke={__name:"CreateNotificationDialog",props:["visible","statuses"],setup(x){const{visible:N,statuses:m}=x,{projectsDropdown:l}=U(X()),{addNewNotification:g}=I(),u=J(),a=n(N),o=n(""),s=n(""),_=n({}),V=n({}),w=async()=>{const j={id:Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)+1,title:o.value,content:s.value,status:_.value.value,deleted:"false",project_id:V.value.value,created_by:13,updated_by:13,created_at:new Date().toLocaleString(),updated_at:null},i=await g(j);a.value=!1,i!=null&&i.result=="ok"?u.add({severity:"success",summary:"Success",detail:"Create New Notification Successfully!",group:"bl",life:3e3}):u.add({severity:"danger",summary:"Error",detail:"Failed to Create New Notification",group:"bl",life:3e3})};return(j,i)=>{const T=q,C=G,k=Q,$=R,S=F;return H(),M(S,{visible:t(a),"onUpdate:visible":i[5]||(i[5]=r=>D(a)?a.value=r:null),modal:"",maximizable:"",header:"Header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:y(()=>[ve]),footer:y(()=>[c($,{type:"button",label:"Cancel",text:"",severity:"secondary",onClick:i[4]||(i[4]=r=>a.value=!1)}),c($,{type:"submit",label:"Save",onClick:w})]),default:y(()=>[e("template",me,[e("div",_e,[xe,c(T,{id:"projectID",placeholder:"Select Project",modelValue:t(V).value,"onUpdate:modelValue":i[0]||(i[0]=r=>t(V).value=r),options:t(l),optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])]),e("div",be,[ye,c(C,{id:"title",placeholder:"Title",modelValue:t(o),"onUpdate:modelValue":i[1]||(i[1]=r=>D(o)?o.value=r:null)},null,8,["modelValue"])]),e("div",ge,[Ve,c(T,{id:"status",class:"flex-1",placeholder:"Select Status",modelValue:t(_).value,"onUpdate:modelValue":i[2]||(i[2]=r=>t(_).value=r),options:x.statuses,optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])]),e("div",we,[he,c(k,{id:"content",modelValue:t(s),"onUpdate:modelValue":i[3]||(i[3]=r=>D(s)?s.value=r:null),placeholder:"Content",autoResize:"",rows:"5",cols:"30"},null,8,["modelValue"])])])]),_:1},8,["visible"])}}},De=e("div",{class:"inline-flex items-center justify-center gap-2"},[e("span",{class:"font-bold text-xl"},"Notification Details")],-1),Ne={class:"flex flex-col gap-3"},$e={class:"flex flex-1 flex-col gap-2"},je=e("label",{for:"projectID"},"Project",-1),Te={class:"flex flex-1 flex-col gap-2"},Ce=e("label",{for:"title"},"Title",-1),ke={class:"flex flex-row gap-3"},Se={class:"flex flex-1 flex-col gap-2"},Ue=e("label",{for:"status"},"Status",-1),Ie={class:"flex flex-1 flex-col gap-2"},Ee=e("label",{for:"content"},"Content",-1),Le={class:"flex flex-row gap-3 justify-between"},ze={class:"text-xs text-gray-400"},Ae={class:"text-xs text-gray-400"},Oe={__name:"EditNotificationDialog",props:["visible","statuses"],setup(x){var C,k,$,S,r,f,v,E;const{visible:N,statuses:m}=x,{currentNotification:l}=U(I()),{editNotification:g}=I(),{projectsDropdown:u}=U(X()),a=J(),o=n(N),s=n(l.value.title),_=n(l.value.content),V=n({name:(k=(C=m.filter(p=>p.value==l.value.status))==null?void 0:C[0])==null?void 0:k.name,value:(S=($=m.filter(p=>p.value==l.value.status))==null?void 0:$[0])==null?void 0:S.value}),w=n({name:(f=(r=u.value.filter(p=>p.value==l.value.project_id))==null?void 0:r[0])==null?void 0:f.name,value:(E=(v=u.value.filter(p=>p.value==l.value.project_id))==null?void 0:v[0])==null?void 0:E.value}),j=n(l.value.created_at),i=n(l.value.updated_at),T=async()=>{const p={...l.value,title:s.value,content:_.value,status:V.value.value,project_id:w.value.value,updated_at:new Date().toLocaleString()},d=await g(p);o.value=!1,d!=null&&d.result=="ok"?a.add({severity:"success",summary:"Success",detail:"Edit Notification Successfully!",group:"bl",life:3e3}):a.add({severity:"danger",summary:"Error",detail:"Failed to Edit Notification",group:"bl",life:3e3})};return(p,d)=>{const z=q,Y=G,b=Q,K=R,W=F;return H(),M(W,{visible:t(o),"onUpdate:visible":d[5]||(d[5]=h=>D(o)?o.value=h:null),modal:"",maximizable:"",header:"Header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:y(()=>[De]),footer:y(()=>[c(K,{type:"button",label:"Cancel",text:"",severity:"secondary",onClick:d[4]||(d[4]=h=>o.value=!1)}),c(K,{type:"submit",label:"Save",onClick:T})]),default:y(()=>[e("template",Ne,[e("div",$e,[je,c(z,{id:"projectID",placeholder:"Select Project",modelValue:t(w).value,"onUpdate:modelValue":d[0]||(d[0]=h=>t(w).value=h),options:t(u),optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])]),e("div",Te,[Ce,c(Y,{id:"title",placeholder:"Title",modelValue:t(s),"onUpdate:modelValue":d[1]||(d[1]=h=>D(s)?s.value=h:null)},null,8,["modelValue"])]),e("div",ke,[e("div",Se,[Ue,c(z,{id:"status",class:"flex-1",placeholder:"Select Status",modelValue:t(V).value,"onUpdate:modelValue":d[2]||(d[2]=h=>t(V).value=h),options:x.statuses,optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])]),e("div",Ie,[Ee,c(b,{id:"content",modelValue:t(_),"onUpdate:modelValue":d[3]||(d[3]=h=>D(_)?_.value=h:null),placeholder:"Content",autoResize:"",rows:"5",cols:"30"},null,8,["modelValue"])]),e("div",Le,[e("span",ze," Created at: "+L(("convertDateTime"in p?p.convertDateTime:t(P))(t(j))),1),e("span",Ae," Updated at: "+L(("convertDateTime"in p?p.convertDateTime:t(P))(t(i))),1)])])]),_:1},8,["visible"])}}},Be=e("div",{class:"inline-flex items-center justify-center gap-2"},[e("span",{class:"font-bold text-xl"},"Delete Notification?")],-1),Pe=e("span",null,"You cannot undo this action!",-1),We={__name:"DeleteNotificationDialog",props:["visible"],setup(x){const{visible:N}=x,{currentNotification:m}=U(I()),{deleteNotification:l}=I(),g=J(),u=n(N),a=async()=>{const o=await l(m.value);u.value=!1,o!=null&&o.result=="ok"?g.add({severity:"success",summary:"Success",detail:"Delete Notification Successfully!",group:"bl",life:3e3}):g.add({severity:"danger",summary:"Error",detail:"Failed to Delete Notification",group:"bl",life:3e3})};return(o,s)=>{const _=R,V=F;return H(),M(V,{visible:t(u),"onUpdate:visible":s[1]||(s[1]=w=>D(u)?u.value=w:null),modal:"",maximizable:"",header:"Header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:y(()=>[Be]),footer:y(()=>[c(_,{type:"button",label:"Cancel",text:"",severity:"secondary",onClick:s[0]||(s[0]=w=>u.value=!1)}),c(_,{type:"submit",label:"Yes, delete",severity:"danger",onClick:a})]),default:y(()=>[e("div",null,[e("span",null,[O(" This will delete notification "),e("b",null,L(t(m).title),1),O(" permanently! ")]),Pe])]),_:1},8,["visible"])}}};export{Je as _,Ke as a,Oe as b,We as c,I as u};
