import pe from"./DZPVy99e.js";import de from"./Ba6EhFot.js";import ve from"./DAf1BoBp.js";import _e from"./C0LKiM39.js";import fe from"./BaAof-tj.js";import ge from"./UEL7mprB.js";import be from"./CLsrxzl_.js";import xe from"./BLcYRZFp.js";import ye from"./BCpVkSJa.js";import ke from"./CCanKzlm.js";import Ve from"./C_s4Wp9o.js";import{_ as he,a as $e,b as Fe,c as we}from"./-DTriN_y.js";import{s as I,f as S,r as i,j as De,c as Ce,a,b as t,h as l,w as s,k as ze,g as b,i as Be,l as z,F as Ne,m as Ze,o as _,d as R,t as K,n as Ie}from"./DaYTUSRu.js";import{u as q}from"./zX31c0Ks.js";import{u as G}from"./8wGpG1ui.js";import{u as J}from"./CD1nq2RT.js";import"./BvNob-ru.js";import"./EMNlt2xj.js";import"./Bk9-WN6G.js";import"./DCxbjcdO.js";import"./DqBT-TTB.js";import"./Bb0lkvXH.js";import"./5i5_fOun.js";import"./Mzrc14y1.js";import"./0r4j8XCi.js";import"./DgsDTnHf.js";import"./o9EcI8hj.js";import"./Dg-YmKK3.js";import"./CSkJlOoF.js";import"./BPlO_Ngp.js";import"./ChVfpdSc.js";import"./gKftSCzs.js";import"./BtBcd3ax.js";import"./DY1heZt9.js";import"./D3jY3syq.js";import"./D7MR76jZ.js";import"./Df8bolTu.js";import"./B-OnyGn2.js";import"./kMJDPyUJ.js";import"./DKBZx1RX.js";import"./Dw3xtoWV.js";import"./CBeCEV4t.js";import"./DzPs5bSl.js";import"./WSTKsw6M.js";const Se={class:"w-full h-full flex flex-col"},Te={class:"fixed right-0 top-0 z-50 backdrop-blur-xl w-5/6 h-[8%] px-4 border-b flex justify-between items-center"},Ae={class:"flex items-center gap-2"},Ue=a("span",{class:"font-semibold text-lg"},"Floor",-1),Me={class:"flex items-center gap-2"},Pe={class:"fixed right-0 top-[8%] z-50 backdrop-blur-xl w-5/6 h-[8%] px-4 border-b flex items-center gap-3"},je={class:"flex items-center gap-2"},Ee=a("label",{for:"currentZone",class:"font-semibold text-lg"},"Current Zone: ",-1),Oe={class:"flex items-center gap-2"},He=a("label",{for:"currentZone",class:"font-semibold text-lg"},"Current Block: ",-1),Le={class:"absolute top-[16%] w-full h-[92%]"},Re=a("div",{class:"flex justify-center items-center"},[a("span",null,"No floor found.")],-1),Mo={__name:"index",async setup(Ke){var M,P,j,E,O,H;let c,p;const{zones:B}=I(q()),{getZones:Q}=q(),{blocks:x}=I(G()),{getBlocks:W}=G(),{floors:X,currentFloor:N}=I(J()),{getFloors:Y}=J();[c,p]=S(()=>Q()),await c,p(),[c,p]=S(()=>W()),await c,p(),[c,p]=S(()=>Y()),await c,p(),B.value=B.value.map(e=>({id:e.id,name:`${e.name}`,value:`${e.id}`}));const Z=i(B.value),m=i({name:((M=Z.value[0])==null?void 0:M.name)??"",value:((P=Z.value[0])==null?void 0:P.value)??""});x.value=x.value.map(e=>({id:e.id,name:`${e.desc}`,value:`${e.id}`,zone_id:`${e.zone_id}`}));const d=i(x.value.filter(e=>e.zone_id==m.value.value)),y=i({name:((E=(j=d.value.filter(e=>e.zone_id==m.value.value))==null?void 0:j[0])==null?void 0:E.name)??"",value:((H=(O=d.value.filter(e=>e.zone_id==m.value.value))==null?void 0:O[0])==null?void 0:H.value)??""}),T=De(()=>X.value.filter(e=>e.block_id==y.value.value)),f=i({global:{value:null,matchMode:Ie.CONTAINS}}),A=i(),ee=i([{label:"Move to High Area",command:()=>{}}]),k=i(!1),V=i(!1),h=i(!1),$=i(!1),U=(e,n)=>{var F,r,w,D;n=="zone"&&(d.value=x.value.filter(u=>u.zone_id==e.value),y.value={name:((r=(F=d.value.filter(u=>u.zone_id==m.value.value))==null?void 0:F[0])==null?void 0:r.name)??"",value:((D=(w=d.value.filter(u=>u.zone_id==m.value.value))==null?void 0:w[0])==null?void 0:D.value)??""})},oe=e=>{N.value=e,k.value=!k.value},te=e=>{N.value=e,h.value=!h.value},le=async e=>{N.value=e,$.value=!$.value};return(e,n)=>{const F=pe,r=de,w=ve,D=_e,u=fe,g=ge,L=be,C=xe,ne=ye,ae=ke,se=Ve,ie=he,re=$e,me=Fe,ue=we,ce=Ze("auto-animate");return _(),Ce(Ne,null,[a("div",Se,[a("div",Te,[a("div",Ae,[Ue,t(F,{value:l(T).length},null,8,["value"])]),a("div",Me,[t(u,{iconPosition:"left"},{default:s(()=>[t(w,{class:"flex items-center"},{default:s(()=>[t(r,{name:"mdi:filter-outline"})]),_:1}),t(D,{modelValue:l(f).global.value,"onUpdate:modelValue":n[0]||(n[0]=o=>l(f).global.value=o),placeholder:"Filter floor..."},null,8,["modelValue"])]),_:1}),t(g,{size:"small",label:"New",onClick:n[1]||(n[1]=o=>V.value=!l(V))})])]),a("div",Pe,[a("div",je,[Ee,t(L,{id:"currentZone",placeholder:"Select zone",modelValue:l(m).value,"onUpdate:modelValue":n[2]||(n[2]=o=>l(m).value=o),options:l(Z),optionLabel:"name",optionValue:"value",onChange:n[3]||(n[3]=o=>U(o,"zone"))},null,8,["modelValue","options"])]),a("div",Oe,[He,t(L,{id:"currentBlock",placeholder:"Select block",modelValue:l(y).value,"onUpdate:modelValue":n[4]||(n[4]=o=>l(y).value=o),options:l(d),optionLabel:"name",optionValue:"value",onChange:n[5]||(n[5]=o=>U(o,"block"))},null,8,["modelValue","options"])])]),a("div",Le,[ze((_(),b(se,{value:l(T),filters:l(f),"onUpdate:filters":n[7]||(n[7]=o=>Be(f)?f.value=o:null),paginator:!0,rows:50,rowsPerPageOptions:[5,10,20,50],scrollable:"",scrollHeight:"flex",removableSort:""},{empty:s(()=>[Re]),default:s(()=>[t(C,{field:"desc",header:"Name"},{body:s(({data:o})=>[R(K(o.desc),1)]),_:1}),t(C,{field:"total_area",header:"Total Area",sortable:!0},{body:s(({data:o})=>[R(K(o.total_area),1)]),_:1}),t(C,{field:"progress",header:"Progress",sortable:""},{body:s(({data:o})=>[t(ne,{modelValue:o.progress,"onUpdate:modelValue":v=>o.progress=v,readonly:"",size:50},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(C,{header:"Actions"},{body:s(({data:o})=>[t(g,{text:"",severity:"secondary",onClick:v=>oe(o)},{default:s(()=>[t(r,{name:"mdi:eye-outline"})]),_:2},1032,["onClick"]),t(g,{text:"",severity:"secondary",onClick:v=>te(o)},{default:s(()=>[t(r,{name:"mdi:edit-outline"})]),_:2},1032,["onClick"]),t(g,{text:"",severity:"danger",onClick:v=>le(o)},{default:s(()=>[t(r,{name:"mdi:delete-outline"})]),_:2},1032,["onClick"]),t(g,{text:"",severity:"secondary",onClick:n[6]||(n[6]=v=>l(A).toggle(v))},{default:s(()=>[t(r,{name:"mdi:more-vert"})]),_:1}),t(ae,{ref_key:"menu",ref:A,model:l(ee),popup:!0},null,8,["model"])]),_:1})]),_:1},8,["value","filters"])),[[ce]])])]),l(k)?(_(),b(ie,{key:0,visible:l(k)},null,8,["visible"])):z("",!0),l(V)?(_(),b(re,{key:1,visible:l(V)},null,8,["visible"])):z("",!0),l(h)?(_(),b(me,{key:2,visible:l(h)},null,8,["visible"])):z("",!0),l($)?(_(),b(ue,{key:3,visible:l($)},null,8,["visible"])):z("",!0)],64)}}};export{Mo as default};
