import{q as h,r as s,j as i,v as j,x as u}from"./DaYTUSRu.js";import{u as g}from"./DzPs5bSl.js";const k=h("Projects",()=>{const o=s([]),c=s({}),n=s(0),l=s([]),p=e=>{c.value=e,localStorage.setItem("currentProject",JSON.stringify(e))},d=e=>{n.value=e,localStorage.setItem("currentProjectID",e)},m=i(()=>localStorage.getItem("currentProject")?(c.value=JSON.parse(localStorage.getItem("currentProject")),c.value):{}),P=i(()=>localStorage.getItem("currentProjectID")?(n.value=JSON.parse(localStorage.getItem("currentProjectID")),n.value):0),v=i(async()=>(await r(),o.value.map(e=>({name:`${e.id}`,value:e.id})))),r=async()=>{const{data:e}=await g(u+"/project",{headers:{"Content-Type":"application/json"}},"$oDigmpGLJS");o.value=e.value.data.data.filter(t=>t.deleted=="false"),o.value.length?l.value=o.value.map(t=>({name:`${t.name}`,value:`${t.id}`})):l.value=[]};return{allProjectIDs:v,projects:o,currentProject:c,currentProjectID:n,projectsDropdown:l,currentProjectFromLocalStore:m,currentProjectIDFromLocalStore:P,getProjects:r,addNewProject:async e=>{const t=j("token"),a=await $fetch(u+"/auth/project",{method:"post",headers:{"Content-Type":"application/json",access_token:t},body:e});return await r(),a},editProject:async e=>{const t=j("token"),a=await $fetch(u+`/auth/project/${e.id}`,{method:"put",headers:{"Content-Type":"application/json",access_token:t.value},body:e});return await r(),a},deleteProject:async e=>{const t=j("token"),a=await $fetch(u+`/auth/project/${e.id}`,{method:"delete",headers:{"Content-Type":"application/json",access_token:t.value}});return await r(),a},setCurrentProjectID:d,setCurrentProject:p}});export{k as u};
