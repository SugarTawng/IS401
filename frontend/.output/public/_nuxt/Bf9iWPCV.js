import N from"./ChVfpdSc.js";import U from"./CLsrxzl_.js";import C from"./UEL7mprB.js";import O from"./Dw3xtoWV.js";import{q as j,r as u,v as S,x as T,s as V,u as A,o as I,g as M,w as v,b as r,a as e,h as i,i as y}from"./DaYTUSRu.js";import{u as E}from"./kVCPm6zo.js";import{u as B}from"./DdGny3gd.js";import{u as F}from"./DzPs5bSl.js";const D=j("LandPaymentProcess",()=>{const _=u([]),x=u({}),b=async()=>{const l=S("token"),{data:s}=await F(T+"/auth/landPaymentProcess",{headers:{"Content-Type":"application/json",access_token:l.value}},"$Vkvx2xlAzg");_.value=s.value.data};return{landPaymentProcesses:_,currentLandPaymentProcess:x,getLandPaymentProcesses:b,addNewLandPaymentProcess:async l=>{const s=S("token"),t=await $fetch(T+"/auth/landPaymentProcess",{method:"post",headers:{"Content-Type":"application/json",access_token:s.value},body:l});return await b(),t},editLandPaymentProcess:async l=>{const s=S("token"),t=await $fetch(T+`/auth/landPaymentProcess/${l.id}`,{method:"put",headers:{"Content-Type":"application/json",access_token:s.value},body:l});return await b(),t},deleteLandPaymentProcess:async l=>{const s=S("token");let t="";try{t=await $fetch(T+`/auth/landPaymentProcess/${l.id}`,{method:"delete",headers:{"Content-Type":"application/json",access_token:s.value}})}catch(d){t={...d}}return await b(),t}}}),z=e("div",{class:"inline-flex items-center justify-center gap-2"},[e("span",{class:"font-bold text-xl"},"Create New Payment")],-1),H={class:"flex flex-col gap-3"},R={class:"flex gap-3"},Y={class:"flex flex-1 flex-col gap-2"},q=e("label",{for:"paymentTime"},"Payment Time",-1),G={class:"flex flex-1 flex-col gap-2"},X=e("label",{for:"amountOfMoney"},"Amount Of Money",-1),J={class:"flex gap-3"},K={class:"flex flex-1 flex-col gap-2"},Q=e("label",{for:"amountOfDebt"},"Amount Of Debt",-1),W={class:"flex flex-1 flex-col gap-2"},Z=e("label",{for:"submitter"},"Submitter",-1),ge={__name:"CreateLandPaymentProcessDialog",props:["visible","statuses"],setup(_){const{visible:x,statuses:b}=_,{customersDropdown:P}=V(E()),{currentLandAreaIDFromLocalStore:h}=V(B()),{addNewLandPaymentProcess:n}=D(),l=A(),s=u(x),t=u(0),d=u(0),c=u(0),p=u({});u("");const g=async()=>{const $={id:Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)+1,land_area_id:parseInt(h.value),payment_time:parseInt(t.value),amount_of_money:parseInt(d.value),amount_of_debt:parseInt(c.value),submitter:parseInt(p.value.value),status:"",created_by:13,updated_by:13,created_at:new Date().toLocaleString(),updated_at:null},a=await n($);s.value=!1,a!=null&&a.result=="ok"?l.add({severity:"success",summary:"Success",detail:"Create New Payment Successfully!",group:"bl",life:3e3}):l.add({severity:"danger",summary:"Error",detail:"Failed to Create New Payment",group:"bl",life:3e3})};return($,a)=>{const o=N,w=U,k=C,L=O;return I(),M(L,{visible:i(s),"onUpdate:visible":a[5]||(a[5]=m=>y(s)?s.value=m:null),modal:"",maximizable:"",header:"Header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:v(()=>[z]),footer:v(()=>[r(k,{type:"button",label:"Cancel",text:"",severity:"secondary",onClick:a[4]||(a[4]=m=>s.value=!1)}),r(k,{type:"submit",label:"Save",onClick:g})]),default:v(()=>[e("template",H,[e("div",R,[e("div",Y,[q,r(o,{id:"paymentTime",placeholder:"Payment Time",mode:"decimal",modelValue:i(t),"onUpdate:modelValue":a[0]||(a[0]=m=>y(t)?t.value=m:null),min:0},null,8,["modelValue"])]),e("div",G,[X,r(o,{id:"amountOfMoney",placeholder:"Amount Of Money",mode:"decimal",modelValue:i(d),"onUpdate:modelValue":a[1]||(a[1]=m=>y(d)?d.value=m:null),min:0},null,8,["modelValue"])])]),e("div",J,[e("div",K,[Q,r(o,{id:"amountOfDebt",placeholder:"Amount Of Debt",mode:"decimal",modelValue:i(c),"onUpdate:modelValue":a[2]||(a[2]=m=>y(c)?c.value=m:null),min:0},null,8,["modelValue"])]),e("div",W,[Z,r(w,{id:"submitter",placeholder:"Select Submitter",modelValue:i(p).value,"onUpdate:modelValue":a[3]||(a[3]=m=>i(p).value=m),options:i(P),optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])])])]),_:1},8,["visible"])}}},ee=e("div",{class:"inline-flex items-center justify-center gap-2"},[e("span",{class:"font-bold text-xl"},"Payment Details")],-1),te={class:"flex flex-col gap-3"},ae={class:"flex gap-3"},se={class:"flex flex-1 flex-col gap-2"},oe=e("label",{for:"paymentTime"},"Payment Time",-1),ne={class:"flex flex-1 flex-col gap-2"},le=e("label",{for:"amountOfMoney"},"Amount Of Money",-1),ie={class:"flex gap-3"},ue={class:"flex flex-1 flex-col gap-2"},de=e("label",{for:"amountOfDebt"},"Amount Of Debt",-1),re={class:"flex flex-1 flex-col gap-2"},me=e("label",{for:"submitter"},"Submitter",-1),we={__name:"EditLandPaymentProcessDialog",props:["visible","statuses"],setup(_){const{visible:x,statuses:b}=_,{customers:P,customersDropdown:h}=V(E()),{currentLandPaymentProcess:n}=V(D()),{editLandPaymentProcess:l}=D(),s=A(),t=u(x),d=u(n.value.payment_time),c=u(n.value.amount_of_money),p=u(n.value.amount_of_debt),g=u({name:P.value.filter(a=>a.id==n.value.submitter)[0].display_name,value:`${P.value.filter(a=>a.id==n.value.submitter)[0].id}`});u(n.value.status);const $=async()=>{const a={...n.value,payment_time:parseInt(d.value),amount_of_money:parseInt(c.value),amount_of_debt:parseInt(p.value),submitter:parseInt(g.value.value),status:"",updated_at:new Date().toLocaleString()},o=await l(a);t.value=!1,o!=null&&o.result=="ok"?s.add({severity:"success",summary:"Success",detail:"Edit Payment Successfully!",group:"bl",life:3e3}):s.add({severity:"danger",summary:"Error",detail:"Failed to Edit Payment",group:"bl",life:3e3})};return(a,o)=>{const w=N,k=U,L=C,m=O;return I(),M(m,{visible:i(t),"onUpdate:visible":o[5]||(o[5]=f=>y(t)?t.value=f:null),modal:"",maximizable:"",header:"Header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:v(()=>[ee]),footer:v(()=>[r(L,{type:"button",label:"Cancel",text:"",severity:"secondary",onClick:o[4]||(o[4]=f=>t.value=!1)}),r(L,{type:"submit",label:"Save",onClick:$})]),default:v(()=>[e("template",te,[e("div",ae,[e("div",se,[oe,r(w,{id:"paymentTime",placeholder:"Payment Time",mode:"decimal",modelValue:i(d),"onUpdate:modelValue":o[0]||(o[0]=f=>y(d)?d.value=f:null),min:0},null,8,["modelValue"])]),e("div",ne,[le,r(w,{id:"amountOfMoney",placeholder:"Amount Of Money",mode:"decimal",modelValue:i(c),"onUpdate:modelValue":o[1]||(o[1]=f=>y(c)?c.value=f:null),min:0},null,8,["modelValue"])])]),e("div",ie,[e("div",ue,[de,r(w,{id:"amountOfDebt",placeholder:"Amount Of Debt",mode:"decimal",modelValue:i(p),"onUpdate:modelValue":o[2]||(o[2]=f=>y(p)?p.value=f:null),min:0},null,8,["modelValue"])]),e("div",re,[me,r(k,{id:"submitter",placeholder:"Select Submitter",modelValue:i(g).value,"onUpdate:modelValue":o[3]||(o[3]=f=>i(g).value=f),options:i(h),optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])])])]),_:1},8,["visible"])}}},ce=e("div",{class:"inline-flex items-center justify-center gap-2"},[e("span",{class:"font-bold text-xl"},"Delete Payment?")],-1),pe=e("div",null,[e("span",null," This will delete this payment permanently! "),e("span",null,"You cannot undo this action!")],-1),Ve={__name:"DeleteLandPaymentProcessDialog",props:["visible"],setup(_){const{visible:x}=_,{currentLandPaymentProcess:b}=V(D()),{deleteLandPaymentProcess:P}=D(),h=A(),n=u(x),l=async()=>{const s=await P(b.value);n.value=!1,s!=null&&s.result=="ok"?h.add({severity:"success",summary:"Success",detail:"Delete Payment Successfully!",group:"bl",life:3e3}):h.add({severity:"danger",summary:"Error",detail:"Failed to Delete Payment",group:"bl",life:3e3})};return(s,t)=>{const d=C,c=O;return I(),M(c,{visible:i(n),"onUpdate:visible":t[1]||(t[1]=p=>y(n)?n.value=p:null),modal:"",maximizable:"",header:"Header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:v(()=>[ce]),footer:v(()=>[r(d,{type:"button",label:"Cancel",text:"",severity:"secondary",onClick:t[0]||(t[0]=p=>n.value=!1)}),r(d,{type:"submit",label:"Yes, delete",severity:"danger",onClick:l})]),default:v(()=>[pe]),_:1},8,["visible"])}}};export{ge as _,we as a,Ve as b,D as u};
